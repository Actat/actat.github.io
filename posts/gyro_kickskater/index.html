<!doctype html><html lang=ja>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>魔改造の夜 第10回「キックスケーター25m綱渡り」感想 | おなかすいた</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="NHKで放送された魔改造の夜 第10回「キックスケーター25m綱渡り」[1]では
ジャイロによるキックスケーターの姿勢の安定化が試みられていた．
ジャイロを搭載したキックスケーターが転倒しない条件について簡単に解説する．
また，番組の感想を述べる．">
<meta name=generator content="Hugo 0.92.2">
<meta name=robots content="index, follow">
<link rel=stylesheet href=/ananke/css/main.min.c218715ea76fa6ea4fd1f310459b11effa883e668ed1cf6b67827ea82cf37577.css>
<link rel="shortcut icon" href=/images/about/leaf.JPG type=image/x-icon>
<meta property="og:title" content="魔改造の夜 第10回「キックスケーター25m綱渡り」感想">
<meta property="og:description" content="NHKで放送された魔改造の夜 第10回「キックスケーター25m綱渡り」[1]では
ジャイロによるキックスケーターの姿勢の安定化が試みられていた．
ジャイロを搭載したキックスケーターが転倒しない条件について簡単に解説する．
また，番組の感想を述べる．">
<meta property="og:type" content="article">
<meta property="og:url" content="https://actat.github.io/posts/gyro_kickskater/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2025-03-30T10:41:16+09:00">
<meta property="article:modified_time" content="2025-03-30T10:41:16+09:00">
<meta itemprop=name content="魔改造の夜 第10回「キックスケーター25m綱渡り」感想">
<meta itemprop=description content="NHKで放送された魔改造の夜 第10回「キックスケーター25m綱渡り」[1]では
ジャイロによるキックスケーターの姿勢の安定化が試みられていた．
ジャイロを搭載したキックスケーターが転倒しない条件について簡単に解説する．
また，番組の感想を述べる．"><meta itemprop=datePublished content="2025-03-30T10:41:16+09:00">
<meta itemprop=dateModified content="2025-03-30T10:41:16+09:00">
<meta itemprop=wordCount content="4790">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="魔改造の夜 第10回「キックスケーター25m綱渡り」感想">
<meta name=twitter:description content="NHKで放送された魔改造の夜 第10回「キックスケーター25m綱渡り」[1]では
ジャイロによるキックスケーターの姿勢の安定化が試みられていた．
ジャイロを搭載したキックスケーターが転倒しない条件について簡単に解説する．
また，番組の感想を述べる．">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-140153146-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class="ma0 sans-serif bg-near-white production">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/ class="f3 fw2 hover-white no-underline white-90 dib">
おなかすいた
</a>
<div class="flex-l items-center">
<ul class="pl0 mr3">
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/about/ title="About ページ">
About
</a>
</li>
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/posts/ title="Posts ページ">
Posts
</a>
</li>
</ul>
<div class=ananke-socials>
<a href=https://twitter.com/Actat85 target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window">
<span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a>
<a href=https://www.instagram.com/actat85/ target=_blank class="instagram ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Instagram link" rel=noopener aria-label="follow on Instagram——Opens in a new window">
<span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M42.271 26.578v-.006c.502.0 1.005.01 1.508-.002.646-.017 1.172-.57 1.172-1.217.0-.963.0-1.927.0-2.89.0-.691-.547-1.24-1.236-1.241-.961.0-1.922-.001-2.883.0-.688.001-1.236.552-1.236 1.243-.001.955-.004 1.91.003 2.865.001.143.028.291.073.426.173.508.639.82 1.209.823C41.344 26.579 41.808 26.578 42.271 26.578zM33 27.817c-3.384-.002-6.135 2.721-6.182 6.089-.049 3.46 2.72 6.201 6.04 6.272 3.454.074 6.248-2.686 6.321-6.043C39.254 30.675 36.462 27.815 33 27.817zM21.046 31.116v.082c0 4.515-.001 9.03.0 13.545.0.649.562 1.208 1.212 1.208 7.16.001 14.319.001 21.479.0.656.0 1.215-.557 1.215-1.212.001-4.509.0-9.02.0-13.528v-.094H42.04c.411 1.313.537 2.651.376 4.014s-.601 2.631-1.316 3.803-1.644 2.145-2.779 2.918c-2.944 2.006-6.821 2.182-9.946.428-1.579-.885-2.819-2.12-3.685-3.713-1.289-2.373-1.495-4.865-.739-7.451C22.983 31.116 22.021 31.116 21.046 31.116zM45.205 49.255c.159-.026.318-.049.475-.083 1.246-.265 2.264-1.304 2.508-2.557.025-.137.045-.273.067-.409V21.794c-.021-.133-.04-.268-.065-.401-.268-1.367-1.396-2.428-2.78-2.618-.058-.007-.113-.02-.17-.03H20.761c-.147.027-.296.047-.441.08-1.352.308-2.352 1.396-2.545 2.766-.008.057-.02.114-.029.171V46.24c.028.154.05.311.085.465.299 1.322 1.427 2.347 2.77 2.52.064.008.13.021.195.03H45.205zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a>
<a href=https://github.com/Actat target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window">
<span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</span>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a>
</div>
</div>
</div>
</nav>
</div>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-140153146-1','auto'),ga('send','pageview'))</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-140153146-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class="mt3 ananke-socials">
<a href="https://twitter.com/share?url=https://actat.github.io/posts/gyro_kickskater/&text=%e9%ad%94%e6%94%b9%e9%80%a0%e3%81%ae%e5%a4%9c%20%e7%ac%ac10%e5%9b%9e%e3%80%8c%e3%82%ad%e3%83%83%e3%82%af%e3%82%b9%e3%82%b1%e3%83%bc%e3%82%bf%e3%83%bc25m%e7%b6%b1%e6%b8%a1%e3%82%8a%e3%80%8d%e6%84%9f%e6%83%b3" class="ananke-social-link twitter no-underline" aria-label="share on Twitter">
<span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span>
</a>
</div>
<h1 class="f1 athelas mt3 mb1">魔改造の夜 第10回「キックスケーター25m綱渡り」感想</h1>
<time class="f6 mv4 dib tracked" datetime=2025-03-30T10:41:16+09:00>3月 30, 2025</time>
</header>
<div class="nested-copy-line-height lh-copy sans-serif bg-near-white f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>NHKで放送された魔改造の夜 第10回「キックスケーター25m綱渡り」[1]では
ジャイロによるキックスケーターの姿勢の安定化が試みられていた．
ジャイロを搭載したキックスケーターが転倒しない条件について簡単に解説する．
また，番組の感想を述べる．</p>
<h2 id=ジャイロ倒立振子のモデル>ジャイロ倒立振子のモデル</h2>
<p>ジャイロを搭載したキックスケーターの並進の運動を無視し姿勢制御の部分のみに着目すると倒立振子とみなせる．
キックスケーターが直立しているときに車輪が接地する位置に沿って\(x_0\)軸をとり，
左方向に\(y_0\)軸，鉛直上向きに\(z_0\)軸をとって慣性系を定める．
キックスケーター本体は\(x_0\)軸周りに自由に回転でき，傾きの大きさを\(\theta_1\)とする．
キックスケーター上には1軸のジンバルが搭載されており，ジンバル軸の高さは（直立時に）地面から\(l_1\)とする．
ジンバルの回転軸はキックスケーターの左右方向を向いており，ジンバルの初期位置からの回転角を\(\theta_2\)で表す．
フライホイールはジンバルで支持されていて，鉛直な軸周りに回転する．
フライホイールの重心はジンバル軸から\(l_2\)だけ高い位置にオフセットされているものとする．
フライホイールのジンバルに対する回転角を\(\theta_3\)で表す．</p>
<p>慣性要素はフライホイールのみを考え，質量を\(m\)とする．
慣性テンソルは
$$
{}^{3}{\boldsymbol{J}}=
\begin{bmatrix}
J_r & 0 & 0 \\
0 & J_r & 0 \\
0 & 0 & J_p
\end{bmatrix}
$$
とする．
ここで，左上付きの\(3\)はフライホイールに固定された座標系での表現であることを表す．
テンソルを対角行列としているのはフライホイールが回転軸（\(z_3\)軸）のまわりに対称に作られる前提の反映である．</p>
<figure><img src=/images/gyro_kickskater/coordinates.svg>
</figure>
<h2 id=ジャイロ倒立振子の運動方程式>ジャイロ倒立振子の運動方程式</h2>
<p>がんばると次の方程式が得られる（付録参照）．
$$
\begin{cases}
&\begin{split}
0 ={}& \left(J_r\cos^2\theta_2 + J_p\sin^2\theta_2 + m\left(l_1+l_2\cos\theta_2\right)^2\right)\ddot{\theta}_1 \\
& +2\left(\left(J_p-J_r\right)\cos\theta_2 - m\left(l_1+l_2\cos\theta_2\right)l_2\right)
\sin\theta_2\dot{\theta}_1\dot{\theta}_2 \\
& +J_p\cos\theta_2\dot{\theta}_2\dot{\theta}_3 + J_p\sin\theta_2\ddot{\theta}_3
-mg\left(l_1+l_2\cos\theta_2\right)\sin\theta_1
\end{split}
\\
&\begin{split}
0 ={}& \left(J_r+ml_2^2\right)\ddot{\theta}_2 \\
&- \left(\left(J_p-J_r\right)\cos\theta_2 - ml_2\left(l_1+l_2\cos\theta_2\right)\right)
\sin\theta_2\dot{\theta}_1^2 \\
&- J_p\cos\theta_2\dot{\theta}_1\dot{\theta}_3 - mgl_2\cos\theta_1\sin\theta_2
\end{split}
\end{cases}
$$</p>
<p>フライホイールは一定の速度での回転を維持するので\(\ddot{\theta}_3=0\)とする．
平衡状態の近くに注目して
\(\theta_1, \theta_2, \dot{\theta}_1, \dot{\theta}_2\)は十分に小さいものとして2次以上の項は無視すると，
次の簡略化した式が得られる．
$$
\begin{cases}
\ddot{\theta}_1 =
-\frac{J_p\dot{\theta}_3}{J_r+m\left(l_1+l_2\right)^2}\dot{\theta}_2
+\frac{mg\left(l_1+l_2\right)}{J_r+m\left(l_1+l_2\right)^2}\theta_1
\\
\ddot{\theta}_2 =
\frac{J_p\dot{\theta}_3}{J_r+ml_2^2}\dot{\theta}_1
+\frac{mgl_2}{J_r+ml_2^2}\theta_2
\end{cases}
$$
以下では表記を簡単にするために
$$
\begin{split}
& h_1 = \frac{J_p\dot{\theta}_3}{J_r+m\left(l_1+l_2\right)^2},\quad
& k_1 = \frac{mg\left(l_1+l_2\right)}{J_r+m\left(l_1+l_2\right)^2},\quad
\\
& h_2 = \frac{J_p\dot{\theta}_3}{J_r+ml_2^2},\quad
& k_2 = \frac{mgl_2}{J_r+ml_2^2}
\end{split}
$$
とする．</p>
<p>状態方程式の形（\(\dot{\boldsymbol{x}}=\boldsymbol{Ax}\)）に整理すると
$$
\frac{d}{dt}\begin{bmatrix} \theta_1 \\ \theta_2 \\ \dot{\theta}_1 \\ \dot{\theta}_2 \end{bmatrix}
= \begin{bmatrix}
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1 \\
k_1 & 0 & 0 & -h_1 \\
0 & k_2 & h_2 & 0
\end{bmatrix}
\begin{bmatrix} \theta_1 \\ \theta_2 \\ \dot{\theta}_1 \\ \dot{\theta}_2 \end{bmatrix}
$$
となる．</p>
<h2 id=ジャイロ倒立振子の安定性>ジャイロ倒立振子の安定性</h2>
<p>行列\(\boldsymbol{A}\)の固有値を求める．
$$
|\boldsymbol{A}-\lambda\boldsymbol{I}|
= \lambda^4 + \left(h_1h_2-k_1-k_2\right)\lambda^2 + k_1k_2
$$
なので，以下では\(a_2 = h_1h_2-k_1-k_2, a_0 = k_1k_2\)とする．</p>
<p>固有値は\(|\boldsymbol{A}-\lambda\boldsymbol{I}|=0\)から
$$
\begin{cases}
\frac{-\sqrt{2\sqrt{a_0}-a_2}\pm\sqrt{-2\sqrt{a_0}-a_2}}{2},
\frac{ \sqrt{2\sqrt{a_0}-a_2}\pm\sqrt{-2\sqrt{a_0}-a_2}}{2}
&(D = a_2^2 - 4a_0\leq 0)
\\
\pm\sqrt{-\frac{a_2}{2}-\frac{\sqrt{D}}{2}},
\pm\sqrt{-\frac{a_2}{2}+\frac{\sqrt{D}}{2}}
&(D = a_2^2 - 4a_0\geq 0)
\end{cases}
$$
である．</p>
<p>判別式\(D = a_2^2 - 4a_0\leq 0\)のとき
（このとき\(a_0\geq 0\)で\(2\sqrt{a_0}\geq|a_2|\)である）
固有値\(\frac{ \sqrt{2\sqrt{a_0}-a_2}\pm\sqrt{-2\sqrt{a_0}-a_2}}{2}\)は
前の根号は正の実数，後ろの根号は虚数である．
固有値の実数部分が正だから\(D \leq 0\)のとき発散する．</p>
<p>判別式\(D = a_2^2 - 4a_0\geq 0\)のとき発散しないためには根号の中身が負である必要がある．
\(D\geq 0\)だから\(-\frac{a_2}{2}+\frac{\sqrt{D}}{2}\leq 0\)だけ考えればよく，
これを整理すると\(a_0\geq 0\)かつ\(a_2\geq 0\)が満たすべき条件だとわかる．
まず，\(a_0\geq 0\)について確認する．
$$
a_0 =
\frac{mg\left(l_1+l_2\right)}{J_r+m\left(l_1+l_2\right)^2}
\cdot\frac{mgl_2}{J_r+ml_2^2}
\geq 0
$$
であるが，\(g\)は重力加速度であり，\(m, J_r\)は慣性プロパティで正の数である．
この不等式は地面とジンバル軸，ジンバル軸とフライホイールの間の距離である\(l_1, l_2\)についての条件を与える．
機械的にはフライホイールが地面にめり込まない\(l_1+l_2\geq 0\)の範囲であれば\(l_2\leq 0\)となることも考えられるが，
発散しない系とするためには
$$
l_2 \geq 0
$$
とする必要がある．
次に\(a_2\geq 0\)について確認する．
$$
a_2 =
\frac{J_p^2\dot{\theta}_3^2
-mg\left(l_1+l_2\right)\left(J_r+ml_2^2\right)
-mgl_2\left(J_r+m\left(l_1+l_2\right)^2\right)}
{\left(J_r+m\left(l_1+l_2\right)^2\right)\left(J_r+ml_2^2\right)}
\geq 0
$$
であるが，分母は正なので分子の符号だけ考えればよく，これを整理すると
$$
\left(J_p\dot{\theta}_3\right)^2 \geq
mg\left(l_1+2l_2\right)\left(J_r + ml_2\left(l_1+l_2\right)\right)
$$
が得られる．</p>
<p>これまでの議論から，\(\boldsymbol{x}\)が発散せず倒立振子が倒れないためには</p>
<ul>
<li>フライホイールをジンバル軸よりも高い位置に取り付ける</li>
<li>フライホイールに十分な角運動量を持たせる</li>
</ul>
<p>の2点を満たさなければならないことがわかる．
このモデルは\(l_1=0\)とすると，その場にとどまるように拘束された独楽の運動とも解釈でき，振れまわりの運動をすることを想像できるだろう．
番組の中ではフライホイールをジンバル軸よりも高い位置に取り付けたPナソニックのキックスケーター[2]が長時間この運動をし続けることが紹介されていた．
このキックスケーターの運動をChoreonoidを用いて簡単にシミュレーションした結果を示す．
使用したファイルはgithubに置いてある[3]ので，別の条件に興味がある場合はぜひ活用してほしい．</p>
<blockquote class=twitter-tweet data-media-max-width=560><p lang=ja dir=ltr>フライホイールを定速で回したら吹き飛ばなくなった．起動の反動で向きが変わっちゃうことを除けばだいぶ良さそう．<br>（初期状態からジャイロを起動しておけたら嬉しい．） <a href=https://t.co/gl0iVaSFOA>pic.twitter.com/gl0iVaSFOA</a></p>&mdash; Actat🍃 (@Actat85) <a href="https://twitter.com/Actat85/status/1826545392009576903?ref_src=twsrc%5Etfw">August 22, 2024</a></blockquote> <script async src=https://platform.twitter.com/widgets.js></script>
<p>念のために断っておくと，上記の2条件を満たしても固有値の実部はゼロにしかならないので時間がたっても収束はしない．
きちんと収束させたい場合，ジンバル軸にアクチュエータをつけてフィードバック制御すると良い．
このようにジンバルを能動的に駆動してジャイロトルクを発生させる手法はコントロールモーメントジャイロ（CMG）として古くから知られており，
人工衛星などで活用されている．
今回考えたモデルを通常のCMGによる姿勢制御と比較すると，ジンバルをモータで駆動する代わりに重力によって駆動したと見ることができて，
重心をジンバル軸よりも上に持っていく必要があることがジンバルの傾きをより大きくする方向にアクチュエータ入力が必要なことに対応する．</p>
<p>また，即座に転倒しないという意味では\(l_2=0\)でも構わない．
実際，番組中ではPナソニック以外のキックスケーターはこのような構成だった．
ただし，この場合は固有値にゼロを持つようになって振れまわりの運動はしなくなる．
実機製作の上では，重心の位置が少しでも下に行くと不安定になってしまう点に注意が必要である．</p>
<h2 id=魔改造の夜-第10回キックスケーター25m綱渡りの感想>魔改造の夜 第10回「キックスケーター25m綱渡り」の感想</h2>
<p>魔改造の夜はちゃんと追いかけていなかったが，ジャイロ回と聞いたので視聴した．
視聴時点で既にジャイロをテーマにした研究活動を5年くらい経験していたし
番組中で紹介されていたジャイロモノレールについても（本[4]を読んだことはないがホームページ[5]で）概要は知っていた．
そのため，キックスケーターを立たせておくためにジャイロを使う方法は概ね理解した状態での視聴だった．
答えを知っているから参加者が答えに到達できるかやどのように到達するかに目が行った．</p>
<p>番組中，ここで紹介した解に到達して長時間の転倒防止を実現したのはPナソニックだけだった．
番組中での紹介では，試作によって長時間の転倒防止が難しいことを発見し，理論的な計算によって条件を導き出し，実験で検証するという手順を踏んでいた．
うまくいった開発を後から振り返ればそうなるのは当然という面もあるが，王道中の王道の経路でありお手本のような工学のストーリーだった．
（番組中の理論的な解説は様子がおかしかったが，ちらっと映っていたノートはシステムのふるまいの調査をしているように見えたので，たぶんNHKが悪いのだろうと思った．）</p>
<p>Ｏスズはジャイロモノレールの本[4]を読んでいることが番組で紹介されていた．
綱渡りの綱はピンと張られているわけではないので，坂を下りて登ることになってキックスケーター全体がピッチ方向に回転させられ，これがジャイロによる姿勢制御システムへの外乱となる課題がある．
番組では，この本からジャイロの自転軸の向きをキックスケーターの左右方向にするアイデアを得て改善したことが紹介されていた．
解決すべき課題に対して有用な文献を発見して自分の実装に反映するのも，よくあるパターンである．
ただ（自分は本を確認していないので何とも言えないものの）その本を読んだらジンバル軸へのフィードバックが大事だということも書いてあるのではないかと思った．</p>
<p>Ｔ工大は\(l_2=0\)にしているわりにアクチュエータもついてなさそうだった記憶があるのだが，具体的なエピソードが記憶にない．
放送をみてから一年くらい経ってからこの文章を書いているので上記の番組内容ももしかしたら間違っているかもしれない．</p>
<p>全チーム合計で何人が参加したのかわからないが，その中に一人も答えを知っている人がいなかったことは残念だった．
「なんか回ってると倒れないらしい」で理解が止まっていることが多すぎるので</p>
<ul>
<li>ジンバルをつけて歳差運動できるようにしないと意味がない</li>
<li>ジンバルは不安定に支持しないと姿勢は安定にならない</li>
</ul>
<p>くらいのことは聞きかじっておいて必要なときに思い出してもらえるとうれしい．
ここまで読んだ人には，ぜひ，
独楽って確かに支持点より重心が高いなあとか，
静的に安定な起きあがり独楽は回すとひっくり返るなあ
といった経験的な内容と結びつけて頭の片隅に置いておいていただきたい．</p>
<h2 id=参考文献>参考文献</h2>
<ol>
<li>第10回「キックスケーター25m綱渡り」 - 魔改造の夜 - NHK <a href=https://www.nhk.jp/p/ts/6LQ2ZM4Z3Q/episode/te/VR1G2K3NVK/>https://www.nhk.jp/p/ts/6LQ2ZM4Z3Q/episode/te/VR1G2K3NVK/</a></li>
<li>第二の夜「キックスケーター綱渡り」 | 魔改造の夜プロジェクト特設サイト | Panasonic <a href=https://tech.panasonic.com/jp/robot/makaizo/kickskater/>https://tech.panasonic.com/jp/robot/makaizo/kickskater/</a></li>
<li>Actat/kickskater <a href=https://github.com/Actat/kickskater>https://github.com/Actat/kickskater</a></li>
<li>森博嗣 ``ジャイロモノレール'' 幻冬舎 2018. <a href=https://www.gentosha.jp/store/ebook/detail/8178>https://www.gentosha.jp/store/ebook/detail/8178</a></li>
<li>浮遊工作室(機関車製作部) <a href=https://www.ne.jp/asahi/beat/non/loco/gyro/gyro1.html>https://www.ne.jp/asahi/beat/non/loco/gyro/gyro1.html</a></li>
</ol>
<h2 id=付録-運動方程式の導出>付録 運動方程式の導出</h2>
<p>慣性系を0系，キックスケーター本体に固定された座標系を1系，ジンバルに固定された座標系を2系，フライホイールに固定された座標系を3系とする．
それぞれの座標系の間の関係は
$$
\begin{align}
{}^{0}\boldsymbol{T}_{1}
={}& \begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & \cos\theta_1 & -\sin\theta_1 & 0 \\
0 & \sin\theta_1 & \cos\theta_1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
\\
{}^{1}\boldsymbol{T}_{2}
={}& \begin{bmatrix}
\cos\theta_2 & 0 & \sin\theta_2 & 0 \\
0 & 1 & 0 & 0 \\
-\sin\theta_2 & 0 & \cos\theta_2 & l_1 \\
0 & 0 & 0 & 1
\end{bmatrix}
\\
{}^{2}\boldsymbol{T}_{3}
=&{} \begin{bmatrix}
\cos\theta_3 & -\sin\theta_3 & 0 & 0 \\
\sin\theta_3 & \cos\theta_3 & 0 & 0 \\
0 & 0 & 1 & l_2 \\
0 & 0 & 0 & 1
\end{bmatrix}
\end{align}
$$</p>
<p>である．</p>
<p>フライホイールの位置は\({}^3\boldsymbol{c} = \begin{bmatrix}0 & 0 & 0 & 1\end{bmatrix}^T\)であり，慣性系で表すと
$$
{}^{0}\boldsymbol{T}_{1}
{}^{1}\boldsymbol{T}_{2}
{}^{2}\boldsymbol{T}_{3}
{}^3\boldsymbol{c}
= \begin{bmatrix}
l_2\sin\theta_2 \\
-l_2\cos\theta_2\sin\theta_1 - l_1\sin\theta_1 \\
l_2\cos\theta_2\cos\theta_1 + l_1\cos\theta_1 \\
1
\end{bmatrix}
$$
になる．</p>
<p>重力によるポテンシャルは
$$
U = mg\left(l_2\cos\theta_2\cos\theta_1 + l_1\cos\theta_1\right)
$$
である．</p>
<p>重心の慣性系での速度は時間微分することで得られる．
$$
{}^0\dot{\boldsymbol{c}} =
\begin{bmatrix}
l_2\cos\theta_2 \dot{\theta}_2 \\
\left(l_2\sin\theta_2\sin\theta_1\right)\dot{\theta}_2 - \left(l_2\cos\theta_2+l_1\right)\cos\theta_1 \dot{\theta}_1 \\
-\left(l_2\cos\theta_1\sin\theta_2\right)\dot{\theta}_2 -\left(l_2\cos\theta_2+l_1\right)\sin\theta_1 \dot{\theta}_1
\end{bmatrix}
$$
これを用いると並進の運動エネルギは
$$
\frac{1}{2} m {}^0\dot{\boldsymbol{c}} \cdot {}^0\dot{\boldsymbol{c}}
= \frac{1}{2} m l_2^2 \dot{\theta}_2^2 + \frac{1}{2} m \left(l_2 \cos\theta_2 + l_1\right)^2 \dot{\theta}_1^2
$$
と得られる．</p>
<p>フライホイールの角速度はフライホイールの座標系から見ると
$$
{}^3\boldsymbol{\omega} =
\dot{\theta}_1 {}^3\boldsymbol{e}_{x_1} +
\dot{\theta}_2 {}^3\boldsymbol{e}_{y_2} +
\dot{\theta}_3 {}^3\boldsymbol{e}_{z_3} =
\begin{bmatrix}
\dot{\theta}_1\cos\theta_2\cos\theta_3+\dot{\theta}_2\sin\theta_3 \\
-\dot{\theta}_1\cos\theta_2\sin\theta_3+\dot{\theta}_2\cos\theta_3 \\
\dot{\theta}_1\sin\theta_2+\dot{\theta}_3
\end{bmatrix}
$$
であり，回転の運動エネルギは次のように得られる．
$$
\frac{1}{2}\ {}^3\boldsymbol{\omega}^T\ {}^{3}{\boldsymbol{J}}\ {}^3\boldsymbol{\omega} =
\frac{1}{2}\left(J_r\cos^2\theta_2 + J_p\sin^2\theta_2\right)\dot{\theta_1}^2 +
\frac{1}{2}J_r\dot{\theta}_2^2 +
\frac{1}{2}J_p\dot{\theta}_3^2 +
J_p\sin{\theta}_2 \dot{\theta}_1\dot{\theta}_3
$$</p>
<p>以上からラグランジアン\(L\)が得られる．
$$
\begin{align}
L
={}&\frac{1}{2} m l_2^2 \dot{\theta}_2^2 + \frac{1}{2} m \left(l_2 \cos\theta_2 + l_1\right)^2 \dot{\theta}_1^2 \\
&+\frac{1}{2}\left(J_r\cos^2\theta_2 + J_p\sin^2\theta_2\right)\dot{\theta_1}^2 \\
&+\frac{1}{2}J_r\dot{\theta}_2^2 + \frac{1}{2}J_p\dot{\theta}_3^2 + J_p\sin{\theta}_2 \dot{\theta}_1\dot{\theta}_3 \\
&-mg\left(l_1\cos\theta_1 + l_2\cos\theta_1\cos\theta_2\right)
\end{align}
$$</p>
<p>フライホイールの速度は一定に保つものとして\(\theta_1, \theta_2\)についてのみ考えると次の式が得られる．
$$
\begin{cases}
&\begin{split}
0 ={}& \frac{d}{dt}\left(\frac{\partial L}{\partial \dot{\theta}_1}\right) - \frac{\partial L}{\partial \theta_1} \\
={}& \left(J_r\cos^2\theta_2 + J_p\sin^2\theta_2 + m\left(l_1+l_2\cos\theta_2\right)^2\right)\ddot{\theta}_1 \\
& +2\left(\left(J_p-J_r\right)\cos\theta_2 - m\left(l_1+l_2\cos\theta_2\right)l_2\right)
\sin\theta_2\dot{\theta}_1\dot{\theta}_2 \\
& +J_p\cos\theta_2\dot{\theta}_2\dot{\theta}_3 + J_p\sin\theta_2\ddot{\theta}_3
-mg\left(l_1+l_2\cos\theta_2\right)\sin\theta_1
\end{split}
\\
&\begin{split}
0 ={}& \frac{d}{dt}\left(\frac{\partial L}{\partial \dot{\theta}_2}\right) - \frac{\partial L}{\partial \theta_2} \\
={}& \left(J_r+ml_2^2\right)\ddot{\theta}_2 \\
&- \left(\left(J_p-J_r\right)\cos\theta_2 - ml_2\left(l_1+l_2\cos\theta_2\right)\right)
\sin\theta_2\dot{\theta}_1^2 \\
&- J_p\cos\theta_2\dot{\theta}_1\dot{\theta}_3 - mgl_2\cos\theta_1\sin\theta_2
\end{split}
\end{cases}
$$</p><ul class=pa0>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://actat.github.io/>
&copy; 2025 おなかすいた
</a>
<div>
<div class=ananke-socials>
<a href=https://twitter.com/Actat85 target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window">
<span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a>
<a href=https://www.instagram.com/actat85/ target=_blank class="instagram ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Instagram link" rel=noopener aria-label="follow on Instagram——Opens in a new window">
<span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M42.271 26.578v-.006c.502.0 1.005.01 1.508-.002.646-.017 1.172-.57 1.172-1.217.0-.963.0-1.927.0-2.89.0-.691-.547-1.24-1.236-1.241-.961.0-1.922-.001-2.883.0-.688.001-1.236.552-1.236 1.243-.001.955-.004 1.91.003 2.865.001.143.028.291.073.426.173.508.639.82 1.209.823C41.344 26.579 41.808 26.578 42.271 26.578zM33 27.817c-3.384-.002-6.135 2.721-6.182 6.089-.049 3.46 2.72 6.201 6.04 6.272 3.454.074 6.248-2.686 6.321-6.043C39.254 30.675 36.462 27.815 33 27.817zM21.046 31.116v.082c0 4.515-.001 9.03.0 13.545.0.649.562 1.208 1.212 1.208 7.16.001 14.319.001 21.479.0.656.0 1.215-.557 1.215-1.212.001-4.509.0-9.02.0-13.528v-.094H42.04c.411 1.313.537 2.651.376 4.014s-.601 2.631-1.316 3.803-1.644 2.145-2.779 2.918c-2.944 2.006-6.821 2.182-9.946.428-1.579-.885-2.819-2.12-3.685-3.713-1.289-2.373-1.495-4.865-.739-7.451C22.983 31.116 22.021 31.116 21.046 31.116zM45.205 49.255c.159-.026.318-.049.475-.083 1.246-.265 2.264-1.304 2.508-2.557.025-.137.045-.273.067-.409V21.794c-.021-.133-.04-.268-.065-.401-.268-1.367-1.396-2.428-2.78-2.618-.058-.007-.113-.02-.17-.03H20.761c-.147.027-.296.047-.441.08-1.352.308-2.352 1.396-2.545 2.766-.008.057-.02.114-.029.171V46.24c.028.154.05.311.085.465.299 1.322 1.427 2.347 2.77 2.52.064.008.13.021.195.03H45.205zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a>
<a href=https://github.com/Actat target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window">
<span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</span>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a>
</div>
</div>
</div>
</footer>
<script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9WGWKSLYDD"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-9WGWKSLYDD')</script>
</body>
</html>